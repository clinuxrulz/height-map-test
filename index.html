<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>height map test</title>
  </head>
  <body>
    <canvas style="width: 100%;" id="canvas" width="320" height="200">
    </canvas>
    <script type="module">
      import init, { main } from "./pkg/height_map_test.js";
      window.addEventListener("resize", () => {
        let canvas = document.getElementById("canvas");
        canvas.clientHeight = canvas.clientWidth * 200.0 / 320.0;
      });
      init().then(() => {
        let canvas = document.getElementById("canvas");
        let ctx = canvas.getContext("2d");
        let imgData = ctx.createImageData(320, 200);
        let screen = new Uint32Array(imgData.data.buffer);
        main(screen);
        ctx.putImageData(imgData, 0, 0);
      });
    </script>
  </body>
</html>
